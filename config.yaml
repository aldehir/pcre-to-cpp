# Benchmark configuration for PCRE-to-C++ vs STL regex vs PCRE2 comparison
#
# inputs: Define HuggingFace datasets with loading configuration
# benchmarks: Define patterns to benchmark against those inputs

inputs:
  wikitext-large:
    dataset: wikitext
    subset: wikitext-103-v1
    split: train
    field: text
    max_chars: 1000000
    chunk_size: 10000

  wikitext-small:
    dataset: wikitext
    subset: wikitext-2-v1
    split: train
    field: text
    chunk_size: 10000

benchmarks:
  # GPT-2 style tokenizer
  - name: gpt2
    pcre_pattern: "'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)"
    # STL approximation: Unicode property classes replaced with ASCII
    stl_pattern: "'s|'t|'re|'ve|'m|'ll|'d| ?[A-Za-z]+| ?[0-9]+| ?[^\\s A-Za-z0-9]+|\\s+(?!\\S)"
    inputs:
      - wikitext-large

  # Llama3 style tokenizer
  - name: llama3
    pcre_pattern: "(?i:'s|'t|'re|'ve|'m|'ll|'d)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+"
    # STL approximation: case-insensitive group expanded, Unicode replaced
    stl_pattern: "(?:'[sS]|'[tT]|'[rR][eE]|'[vV][eE]|'[mM]|'[lL][lL]|'[dD])|[^\\r\\n A-Za-z0-9]?[A-Za-z]+|[0-9]{1,3}| ?[^\\s A-Za-z0-9]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+"
    inputs:
      - wikitext-large

  # GPT-4o style tokenizer
  - name: gpt4o
    pcre_pattern: "[^\\r\\n\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?i:'s|'t|'re|'ve|'m|'ll|'d)?|[^\\r\\n\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?i:'s|'t|'re|'ve|'m|'ll|'d)?|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+"
    # STL approximation: Unicode properties replaced with ASCII, CamelCase approximation
    stl_pattern: "[^\\r\\nA-Za-z0-9]?[A-Z]*[a-z]+(?:'[sS]|'[tT]|'[rR][eE]|'[vV][eE]|'[mM]|'[lL][lL]|'[dD])?|[^\\r\\nA-Za-z0-9]?[A-Z]+[a-z]*(?:'[sS]|'[tT]|'[rR][eE]|'[vV][eE]|'[mM]|'[lL][lL]|'[dD])?|[0-9]{1,3}| ?[^\\sA-Za-z0-9]+[\\r\\n/]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+"
    inputs:
      - wikitext-large
